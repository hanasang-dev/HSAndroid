#!/bin/sh

echo "ğŸ” Running Spotless Check..."

./gradlew spotlessCheck --quiet

if [ $? -ne 0 ]; then
  echo "âŒ Spotless Check failed. Running spotlessApply..."
  ./gradlew spotlessApply --quiet

  echo "ğŸ“‚ Applying changes..."
  git add .

  echo "âœ… Spotless format applied. Please review the changes."
  echo "Aborting commit so you can verify."
  exit 1
fi

echo "âœ… Spotless Check passed."

echo "ğŸ” Running Dependency Updates Check..."
./gradlew dependencyUpdates --quiet
git add report.json

echo "âœ… Spotless and Dependency Updates completed."

exit 0